# GLM-4 å‚æ•°æµ‹è¯•ç³»ç»Ÿä½¿ç”¨è¯´æ˜Ž

## ðŸ“‹ æ¦‚è¿°

GLM-4 å‚æ•°æµ‹è¯•ç³»ç»Ÿç”¨äºŽè‡ªåŠ¨æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆå¯¹ GLM-4 å¤§çº²ç”Ÿæˆè´¨é‡çš„å½±å“ï¼Œå¸®åŠ©æ‰¾å‡ºæœ€ä½³å‚æ•°é…ç½®ã€‚

## ðŸŽ¯ ç‰¹æ€§

### 1. ç»§æ‰¿ DeepSeek R1 æµ‹è¯•æ¡†æž¶
- å®Œæ•´ç»§æ‰¿ R1 æµ‹è¯•å™¨çš„æ‰€æœ‰åŠŸèƒ½
- è‡ªåŠ¨è¯„åˆ†ç³»ç»Ÿï¼ˆæ ¼å¼40åˆ† + å†…å®¹40åˆ† + é•¿åº¦20åˆ†ï¼‰
- AI è¯„å®¡åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
- ç›¸å¯¹æŽ’åç³»ç»Ÿ

### 2. GLM-4 ç‰¹æœ‰è¯„ä¼°æŒ‡æ ‡ï¼ˆé¢å¤– 20 åˆ†ï¼‰

| æŒ‡æ ‡ | æƒé‡ | è¯´æ˜Ž |
|------|------|------|
| ä¸­æ–‡æµç•…åº¦ | 5åˆ† | æ£€æµ‹ç¿»è¯‘è…”ã€å†—ä½™ç»“æž„ |
| æ–‡åŒ–åº•è•´ | 5åˆ† | æ£€æµ‹æˆè¯­å…¸æ•…ã€æ–‡åŒ–å…ƒç´  |
| åˆ›æ„æ€§ | 5åˆ† | æ£€æµ‹æ˜¯å¦é¿å¼€å¸¸è§å¥—è·¯ |
| é€»è¾‘è¿žè´¯æ€§ | 5åˆ† | æ£€æµ‹ç« èŠ‚é—´å› æžœå…³ç³» |

**æ€»åˆ†ä½“ç³»**: åŸºç¡€100åˆ† + GLM-4ç‰¹æœ‰20åˆ† = **120åˆ†**

### 3. GLM-4 vs DeepSeek R1 å¯¹æ¯”

è‡ªåŠ¨è½½å…¥ R1 æœ€ä½³ç»“æžœè¿›è¡Œå¯¹æ¯”åˆ†æžï¼š
- ä¸­è‹±æ··é›œçŽ‡å¯¹æ¯”
- ä¸­æ–‡æµç•…åº¦ä¼˜åŠ¿
- æ–‡åŒ–åº•è•´è¯„ä¼°
- åˆ›æ„æ€§æ¯”è¾ƒ

## ðŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€æµ‹è¯•ï¼ˆæŽ¨èï¼‰

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆ10ç»„å‚æ•°ï¼Œ5-10åˆ†é’Ÿï¼‰
python test_glm4_params.py --quick
```

### å®Œæ•´æµ‹è¯•

```bash
# å®Œæ•´æµ‹è¯•ï¼ˆ180ç»„å‚æ•°ï¼Œ1-2å°æ—¶ï¼‰
python test_glm4_params.py --full
```

### å¯¹æ¯”æµ‹è¯•

```bash
# ä¸Ž DeepSeek R1 å¯¹æ¯”æµ‹è¯•
python test_glm4_params.py --quick --compare-with-r1
```

### ç¦ç”¨ AI è¯„å®¡ï¼ˆæ›´å¿«ï¼‰

```bash
# ä»…ä½¿ç”¨è‡ªåŠ¨è¯„ä¼°ï¼ˆèŠ‚çœæ—¶é—´ï¼‰
python test_glm4_params.py --quick --no-ai
```

### è¨ºæ–·æ¨¡å¼ï¼ˆèª¿è©¦ç”¨ï¼‰

```bash
# å•Ÿç”¨è©³ç´°è©•åˆ†éŽç¨‹è¼¸å‡º
python test_glm4_params.py --quick --debug

# è¼¸å‡ºç¯„ä¾‹ï¼š
# ðŸ” [DEBUG] åŸºç¤Žè©•åˆ†: 64/100
# ðŸ” [DEBUG] é–‹å§‹ GLM-4 ç‰¹æœ‰æª¢æŸ¥...
# ðŸ” [DEBUG] GLM-4 æª¢æŸ¥çµæžœ:
#   - chinese_fluency: 1.00
#   - cultural_depth: 0.70
#   - creativity: 0.25
#   - coherence: 0.50
# ðŸ” [DEBUG] GLM-4 ç¸½åˆ†: 12/20
# ðŸ” [DEBUG] æœ€çµ‚ç¸½åˆ†: 76/120
```

## ðŸ“Š æµ‹è¯•å‚æ•°çŸ©é˜µ

### å¿«é€Ÿæµ‹è¯•å‚æ•°ï¼ˆ10ç»„ï¼‰

```python
QUICK_TEST_PARAMS = [
    # å½“å‰é…ç½®
    {'temperature': 0.7, 'top_p': 0.9, 'repetition_penalty': 1.1, 'max_tokens': 6000},

    # é«˜åˆ›æ„é…ç½®
    {'temperature': 0.8, 'top_p': 0.95, 'repetition_penalty': 1.05, 'max_tokens': 6000},
    {'temperature': 0.9, 'top_p': 0.9, 'repetition_penalty': 1.0, 'max_tokens': 6000},

    # å¹³è¡¡é…ç½®
    {'temperature': 0.7, 'top_p': 0.85, 'repetition_penalty': 1.1, 'max_tokens': 6000},
    {'temperature': 0.6, 'top_p': 0.9, 'repetition_penalty': 1.1, 'max_tokens': 6000},

    # ä¿å®ˆé…ç½®
    {'temperature': 0.5, 'top_p': 0.85, 'repetition_penalty': 1.15, 'max_tokens': 6000},
    {'temperature': 0.6, 'top_p': 0.85, 'repetition_penalty': 1.1, 'max_tokens': 6000},

    # Token é•¿åº¦æµ‹è¯•
    {'temperature': 0.7, 'top_p': 0.9, 'repetition_penalty': 1.1, 'max_tokens': 4000},
    {'temperature': 0.7, 'top_p': 0.9, 'repetition_penalty': 1.1, 'max_tokens': 8000},

    # æžç«¯æµ‹è¯•
    {'temperature': 0.9, 'top_p': 0.95, 'repetition_penalty': 1.0, 'max_tokens': 8000},
]
```

### å®Œæ•´æµ‹è¯•çŸ©é˜µï¼ˆ180ç»„ï¼‰

```python
PARAM_MATRIX = {
    'temperature': [0.5, 0.6, 0.7, 0.8, 0.9],      # 5ä¸ªå€¼
    'top_p': [0.85, 0.9, 0.95],                    # 3ä¸ªå€¼
    'repetition_penalty': [1.0, 1.05, 1.1, 1.15],  # 4ä¸ªå€¼
    'max_tokens': [4000, 6000, 8000]               # 3ä¸ªå€¼
}

# æ€»ç»„åˆæ•°: 5 Ã— 3 Ã— 4 Ã— 3 = 180ç»„
```

## ðŸ“ˆ è¾“å‡ºæŠ¥å‘Š

### æŠ¥å‘Šä½ç½®

```
test_results/glm4/
â”œâ”€â”€ outlines/                              # æ‰€æœ‰æµ‹è¯•å¤§çº²
â”‚   â”œâ”€â”€ outline_001_auto73_ai73.txt
â”‚   â”œâ”€â”€ outline_002_auto77_ai77.txt
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ai_reviews/                            # AIè¯„å®¡è¯¦ç»†æ•°æ®ï¼ˆå¦‚æžœå¯ç”¨ï¼‰
â”‚   â””â”€â”€ review_001.json
â””â”€â”€ r1_params_test_report_latest_auto.md  # æœ€æ–°æµ‹è¯•æŠ¥å‘Š
```

### æŠ¥å‘Šå†…å®¹

1. **ðŸ† æœ€ç»ˆæŽ’å** - å‰3åå‚æ•°é…ç½®
2. **ðŸ“Š è¯¦ç»†æµ‹è¯•ç»“æžœ** - æ‰€æœ‰å‚æ•°ç»„åˆçš„å®Œæ•´è¯„åˆ†è¡¨
3. **ðŸ“ˆ å‚æ•°å½±å“åˆ†æž** - æ¯ä¸ªå‚æ•°çš„å½±å“è¶‹åŠ¿
4. **ðŸ†š GLM-4 vs R1 å¯¹æ¯”** - ä¼˜åŠ£åŠ¿å¯¹æ¯”ï¼ˆå¦‚æžœä½¿ç”¨ --compare-with-r1ï¼‰
5. **ðŸ’¡ å»ºè®®é…ç½®** - åŸºäºŽæµ‹è¯•æ•°æ®çš„æœ€ä½³å‚æ•°æŽ¨è

### æŠ¥å‘Šç¤ºä¾‹

```markdown
## ðŸ† æœ€ç»ˆæŽ’å

### ðŸ¥‡ å† å†›

**å‚æ•°é…ç½®**:
```python
{
    'temperature': 0.9,
    'top_p': 0.9,
    'repetition_penalty': 1.0,
    'max_tokens': 6000
}
```

**è¯„åˆ†è¯¦æƒ…**:
- åŸºç¡€è‡ªåŠ¨è¯„åˆ†: 81/100
- GLM-4 ç‰¹æœ‰è¯„åˆ†: 15/20
- æ€»åˆ†: 96/120

**GLM-4 ç‰¹æœ‰æŒ‡æ ‡**:
- ä¸­æ–‡æµæš¢åº¦: 85%
- æ–‡åŒ–åº•è˜Š: 70%
- å‰µæ„æ€§: 90%
- é‚è¼¯é€£è²«æ€§: 80%
```

## ðŸ”¬ GLM-4 ç‰¹æœ‰æŒ‡æ ‡è¯¦è§£

### 1. ä¸­æ–‡æµæš¢åº¦ (0-1)

**æ£€æµ‹å†…å®¹**:
- âŒ ç¿»è¯‘è…”: "å¦‚æžœ...çš„è¯", "å¯¹äºŽ...æ¥è¯´"
- âŒ å†—ä½™ç»“æž„: "è¿›è¡Œ...çš„", "æ˜¯...çš„"è¿‡åº¦ä½¿ç”¨
- âœ… è‡ªç„¶è¡¨è¾¾: åŠ¨è¯åŠ©è¯ï¼ˆç€ã€äº†ã€è¿‡ï¼‰ä½¿ç”¨

**è¯„åˆ†æ ‡å‡†**:
- ç¿»è¯‘è…” >5æ¬¡: æ¯æ¬¡æ‰£ 0.05
- è‡ªç„¶è¡¨è¾¾ >10æ¬¡: æ¯æ¬¡åŠ  0.1

### 2. æ–‡åŒ–åº•è˜Š (0-1)

**æ£€æµ‹å†…å®¹**:
- å››å­—æˆè¯­ï¼ˆè¿‡æ»¤éžæˆè¯­å¦‚"ç¬¬ä¸€ç« "ï¼‰
- æ–‡åŒ–å…ƒç´ å…³é”®è¯: è¯—è¯ã€å…¸æ•…ã€å„’é“ç¦…ç­‰

**è¯„åˆ†æ ‡å‡†**:
- æˆè¯­ â‰¥5: +0.5åˆ†
- æˆè¯­ â‰¥3: +0.3åˆ†
- æ–‡åŒ–å…ƒç´  â‰¥3: +0.3åˆ†
- æ–‡åŒ–å…ƒç´  â‰¥1: +0.2åˆ†

### 3. å‰µæ„æ€§ (0-1)

**æ£€æµ‹å†…å®¹**:
- âŒ å¸¸è§å¥—è·¯: æœ«æ—¥ã€ç©¿è¶Šã€é‡ç”Ÿã€ç³»ç»Ÿã€éœ¸æ€»
- âœ… åˆ›æ„å…ƒç´ : æ‚–è®ºã€å¤šå…ƒå®‡å®™ã€é‡å­ã€é“å¾·å›°å¢ƒ

**è¯„åˆ†æ ‡å‡†**:
- åŸºå‡†åˆ†: 0.5
- å¥—è·¯å…³é”®è¯: æ¯ä¸ªæ‰£ 0.15-0.3
- åˆ›æ„å…ƒç´ : æ¯ä¸ªåŠ  0.1-0.2

### 4. é‚è¼¯é€£è²«æ€§ (0-1)

**æ£€æµ‹å†…å®¹**:
- ç« èŠ‚é—´å› æžœå…³ç³»
- æ—¶é—´æ ‡è®°ä½¿ç”¨
- é€»è¾‘è¿žæŽ¥è¯ï¼ˆå› æ­¤ã€ç„¶è€Œã€æŽ¥ç€ç­‰ï¼‰

**è¯„åˆ†æ ‡å‡†**:
- åŸºå‡†åˆ†: 0.5
- é€»è¾‘è¯ â‰¥5: +0.3
- é€»è¾‘è¯ â‰¥3: +0.2
- æ—¶é—´æ ‡è®° â‰¥3: +0.2

## ðŸ’¡ å‚æ•°è°ƒä¼˜å»ºè®®

### Temperatureï¼ˆæ¸©åº¦ï¼‰

| èŒƒå›´ | æ•ˆæžœ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| 0.5-0.6 | ä¿å®ˆã€ç¨³å®š | ä¸¥è‚ƒé¢˜æã€æŠ€æœ¯æ–‡æ¡£ |
| 0.7-0.8 | å¹³è¡¡ã€æŽ¨è | **å¤§å¤šæ•°å°è¯´** â­ |
| 0.9-1.0 | åˆ›æ„ã€å†’é™© | å¥‡å¹»ã€å®žéªŒæ€§ä½œå“ |

**å»ºè®®**: 0.7ï¼ˆæµ‹è¯•æ˜¾ç¤ºæœ€ä½³å¹³è¡¡ï¼‰

### Top_Pï¼ˆæ ¸é‡‡æ ·ï¼‰

| èŒƒå›´ | æ•ˆæžœ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| 0.85 | ä¿å®ˆé€‰æ‹© | ä¼ ç»Ÿæ•…äº‹ç»“æž„ |
| 0.9 | å¹³è¡¡é€‰æ‹© | **æŽ¨èè®¾ç½®** â­ |
| 0.95 | å¤šæ ·æ€§é«˜ | éœ€è¦æ„å¤–è½¬æŠ˜ |

**å»ºè®®**: 0.9ï¼ˆä¿æŒå¤šæ ·æ€§åˆä¸å¤±è¿žè´¯ï¼‰

### Repetition Penaltyï¼ˆé‡å¤æƒ©ç½šï¼‰

| èŒƒå›´ | æ•ˆæžœ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| 1.0 | æ— æƒ©ç½š | éœ€è¦é‡å¤å¼ºè°ƒ |
| 1.05-1.1 | è½»åº¦æƒ©ç½š | **æŽ¨èè®¾ç½®** â­ |
| 1.15+ | å¼ºåŠ›æƒ©ç½š | ä¸¥é‡é‡å¤é—®é¢˜ |

**å»ºè®®**: 1.1ï¼ˆæœ‰æ•ˆé˜²æ­¢é‡å¤ï¼‰

### Max Tokensï¼ˆæœ€å¤§æ ‡è®°æ•°ï¼‰

| èŒƒå›´ | æ•ˆæžœ | æˆæœ¬ |
|------|------|------|
| 4000 | ç®€æ´å¤§çº² | ä½Ž |
| 6000 | **æœ€ä½³å¹³è¡¡** â­ | ä¸­ |
| 8000 | è¯¦ç»†å¤§çº² | é«˜ |

**å»ºè®®**: 6000ï¼ˆæ€§ä»·æ¯”æœ€ä¼˜ï¼‰

## ðŸ› ï¸ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰å‚æ•°ç»„åˆ

ç¼–è¾‘ `test_glm4_params.py` ä¸­çš„ `QUICK_TEST_PARAMS`:

```python
CUSTOM_PARAMS = [
    {'temperature': 0.75, 'top_p': 0.92, 'repetition_penalty': 1.08, 'max_tokens': 6000},
    # æ·»åŠ æ›´å¤šè‡ªå®šä¹‰å‚æ•°...
]
```

### å•å‚æ•°éªŒè¯

ä½¿ç”¨å¿«é€ŸéªŒè¯è„šæœ¬:

```bash
python test_glm4_quick_verify.py
```

## ðŸ“ æ³¨æ„äº‹é¡¹

1. **API æˆæœ¬**: å®Œæ•´æµ‹è¯•éœ€è¦ 180 æ¬¡ API è°ƒç”¨ï¼Œå»ºè®®å…ˆç”¨ `--quick` æµ‹è¯•
2. **æ—¶é—´æ¶ˆè€—**:
   - å¿«é€Ÿæµ‹è¯•: 5-10 åˆ†é’Ÿï¼ˆ10ç»„ï¼Œ--no-aiï¼‰
   - å¿«é€Ÿæµ‹è¯• + AI: 15-30 åˆ†é’Ÿï¼ˆ10ç»„ï¼‰
   - å®Œæ•´æµ‹è¯•: 1-2 å°æ—¶ï¼ˆ180ç»„ï¼Œ--no-aiï¼‰
   - å®Œæ•´æµ‹è¯• + AI: 4-6 å°æ—¶ï¼ˆ180ç»„ï¼‰
3. **ç£ç›˜ç©ºé—´**: æ¯æ¬¡æµ‹è¯•ç”Ÿæˆçº¦ 10-20 ä¸ªå¤§çº²æ–‡ä»¶ï¼ˆæ¯ä¸ª 1-2KBï¼‰

## ðŸ” æ•…éšœæŽ’æŸ¥

### é—®é¢˜: GLM-4 ç‰¹æœ‰è¯„åˆ†ä¸º 0

**åŽŸå› **: è¯„ä¼°æŒ‡æ ‡æœªæ­£ç¡®æå–

**è§£å†³**:
```bash
# ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
git pull
python test_glm4_params.py --quick --no-ai
```

### é—®é¢˜: API è°ƒç”¨å¤±è´¥

**åŽŸå› **: API Key æœªé…ç½®æˆ–ç½‘ç»œé—®é¢˜

**è§£å†³**:
```bash
# æ£€æŸ¥ .env æ–‡ä»¶
cat .env | grep SILICONFLOW_API_KEY

# æ‰‹åŠ¨è®¾ç½®
export SILICONFLOW_API_KEY="your_key_here"
```

### é—®é¢˜: æµ‹è¯•æ—¶é—´è¿‡é•¿

**åŽŸå› **: å¯ç”¨äº† AI è¯„å®¡

**è§£å†³**:
```bash
# ä½¿ç”¨ --no-ai åŠ é€Ÿ
python test_glm4_params.py --quick --no-ai
```

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [DeepSeek R1 å‚æ•°æµ‹è¯•ç³»ç»Ÿ](test_r1_params_enhanced.py)
- [Phase 2 å®žæ–½æŠ¥å‘Š](PHASE2_IMPLEMENTATION_REPORT.md)
- [ç´§æ€¥ä¿®å¤æ–‡æ¡£](BUGFIX_CHARACTER_ARC_ENFORCER.md)

## ðŸŽ¯ ä¸‹ä¸€æ­¥

1. **åº”ç”¨æœ€ä½³å‚æ•°**: å°†æµ‹è¯•ç»“æžœåº”ç”¨åˆ° `config.py`
2. **æŒç»­ç›‘æŽ§**: å®šæœŸè¿è¡Œæµ‹è¯•éªŒè¯å‚æ•°æœ‰æ•ˆæ€§
3. **A/B æµ‹è¯•**: å¯¹æ¯”ä¸åŒå‚æ•°åœ¨å®žé™…ç”Ÿæˆä¸­çš„è¡¨çŽ°

## âœ… å®Œæˆæ ‡å¿—

æµ‹è¯•æˆåŠŸçš„æ ‡å¿—:
- âœ… ç”Ÿæˆäº†æµ‹è¯•æŠ¥å‘Š: `test_results/glm4/r1_params_test_report_latest_auto.md`
- âœ… å† å†›é…ç½®æ€»åˆ† >95/120
- âœ… GLM-4 ç‰¹æœ‰è¯„åˆ† >10/20
- âœ… ä¸­æ–‡æµæš¢åº¦ >70%
- âœ… æ— ä¸­è‹±æ··é›œé—®é¢˜
